<div class="mat-typography">
  <h1>My messages</h1>
  <!--<div *ngIf="errorMessage" class="messages-error-message">{{errorMessage}}</div>-->

  <mat-card *ngFor="let message of messages$ | async" class="messages-card">
    <div>
      <div fxFlex>
        <div fxLayout="row">
          <div class="messages-description-label">Date:</div>
          <div>{{message.creationDatetime | date:'dd.MM.yyyy HH:mm:ss'}}</div>
        </div>
        <div fxLayout="row">
          <div class="messages-description-label">Community:</div>
          <div><a [routerLink]="['/communities', message.community.id]">{{message.community.title}}</a></div>
        </div>
        <div fxLayout="row" *ngIf="message.type === 'INVITATION'">
          <div class="messages-description-label">Status:</div>
          <div>{{getStatusText(message)}}</div>
        </div>
      </div>
      <div fxFlex="none">
        <a [routerLink]="[message.id]"
           mat-icon-button title="View message" aria-label="View message">
          <mat-icon>visibility</mat-icon>
        </a>
        <button mat-icon-button *ngIf="showInvitationButtons(message)" (click)="onAccept(message)" title="Accept" aria-label="Accept">
          <mat-icon>done_outline</mat-icon>
        </button>
        <button mat-icon-button *ngIf="showInvitationButtons(message)" (click)="onDecline(message)" title="Decline" aria-label="Decline">
          <mat-icon>cancel</mat-icon>
        </button>
      </div>
    </div>
  </mat-card>
</div>
